var Yn=Object.create;var Rn=Object.defineProperty;var Xn=Object.getOwnPropertyDescriptor;var hn=Object.getOwnPropertyNames;var Gn=Object.getPrototypeOf,et=Object.prototype.hasOwnProperty;var In=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var nt=(s,e,u,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of hn(e))!et.call(s,l)&&l!==u&&Rn(s,l,{get:()=>e[l],enumerable:!(r=Xn(e,l))||r.enumerable});return s};var On=(s,e,u)=>(u=s!=null?Yn(Gn(s)):{},nt(e||!s||!s.__esModule?Rn(u,"default",{value:s,enumerable:!0}):u,s));var An=In(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.Type=a.JsonType=a.JavaScriptTypeBuilder=a.JsonTypeBuilder=a.TypeBuilder=a.TypeBuilderError=a.TransformEncodeBuilder=a.TransformDecodeBuilder=a.TemplateLiteralDslParser=a.TemplateLiteralGenerator=a.TemplateLiteralGeneratorError=a.TemplateLiteralFinite=a.TemplateLiteralFiniteError=a.TemplateLiteralParser=a.TemplateLiteralParserError=a.TemplateLiteralResolver=a.TemplateLiteralPattern=a.TemplateLiteralPatternError=a.UnionResolver=a.KeyArrayResolver=a.KeyArrayResolverError=a.KeyResolver=a.ObjectMap=a.Intrinsic=a.IndexedAccessor=a.TypeClone=a.TypeExtends=a.TypeExtendsResult=a.TypeExtendsError=a.ExtendsUndefined=a.TypeGuard=a.TypeGuardUnknownTypeError=a.ValueGuard=a.FormatRegistry=a.TypeBoxError=a.TypeRegistry=a.PatternStringExact=a.PatternNumberExact=a.PatternBooleanExact=a.PatternString=a.PatternNumber=a.PatternBoolean=a.Kind=a.Hint=a.Optional=a.Readonly=a.Transform=void 0;a.Transform=Symbol.for("TypeBox.Transform");a.Readonly=Symbol.for("TypeBox.Readonly");a.Optional=Symbol.for("TypeBox.Optional");a.Hint=Symbol.for("TypeBox.Hint");a.Kind=Symbol.for("TypeBox.Kind");a.PatternBoolean="(true|false)";a.PatternNumber="(0|[1-9][0-9]*)";a.PatternString="(.*)";a.PatternBooleanExact=`^${a.PatternBoolean}$`;a.PatternNumberExact=`^${a.PatternNumber}$`;a.PatternStringExact=`^${a.PatternString}$`;var vn;(function(s){let e=new Map;function u(){return new Map(e)}s.Entries=u;function r(){return e.clear()}s.Clear=r;function l(x){return e.delete(x)}s.Delete=l;function f(x){return e.has(x)}s.Has=f;function p(x,j){e.set(x,j)}s.Set=p;function g(x){return e.get(x)}s.Get=g})(vn||(a.TypeRegistry=vn={}));var ce=class extends Error{constructor(e){super(e)}};a.TypeBoxError=ce;var Ln;(function(s){let e=new Map;function u(){return new Map(e)}s.Entries=u;function r(){return e.clear()}s.Clear=r;function l(x){return e.delete(x)}s.Delete=l;function f(x){return e.has(x)}s.Has=f;function p(x,j){e.set(x,j)}s.Set=p;function g(x){return e.get(x)}s.Get=g})(Ln||(a.FormatRegistry=Ln={}));var U;(function(s){function e(I){return Array.isArray(I)}s.IsArray=e;function u(I){return typeof I=="bigint"}s.IsBigInt=u;function r(I){return typeof I=="boolean"}s.IsBoolean=r;function l(I){return I instanceof globalThis.Date}s.IsDate=l;function f(I){return I===null}s.IsNull=f;function p(I){return typeof I=="number"}s.IsNumber=p;function g(I){return typeof I=="object"&&I!==null}s.IsObject=g;function x(I){return typeof I=="string"}s.IsString=x;function j(I){return I instanceof globalThis.Uint8Array}s.IsUint8Array=j;function O(I){return I===void 0}s.IsUndefined=O})(U||(a.ValueGuard=U={}));var xn=class extends ce{};a.TypeGuardUnknownTypeError=xn;var c;(function(s){function e(i){try{return new RegExp(i),!0}catch{return!1}}function u(i){if(!U.IsString(i))return!1;for(let k=0;k<i.length;k++){let h=i.charCodeAt(k);if(h>=7&&h<=13||h===27||h===127)return!1}return!0}function r(i){return p(i)||V(i)}function l(i){return U.IsUndefined(i)||U.IsBigInt(i)}function f(i){return U.IsUndefined(i)||U.IsNumber(i)}function p(i){return U.IsUndefined(i)||U.IsBoolean(i)}function g(i){return U.IsUndefined(i)||U.IsString(i)}function x(i){return U.IsUndefined(i)||U.IsString(i)&&u(i)&&e(i)}function j(i){return U.IsUndefined(i)||U.IsString(i)&&u(i)}function O(i){return U.IsUndefined(i)||V(i)}function I(i){return A(i,"Any")&&g(i.$id)}s.TAny=I;function R(i){return A(i,"Array")&&i.type==="array"&&g(i.$id)&&V(i.items)&&f(i.minItems)&&f(i.maxItems)&&p(i.uniqueItems)&&O(i.contains)&&f(i.minContains)&&f(i.maxContains)}s.TArray=R;function b(i){return A(i,"AsyncIterator")&&i.type==="AsyncIterator"&&g(i.$id)&&V(i.items)}s.TAsyncIterator=b;function S(i){return A(i,"BigInt")&&i.type==="bigint"&&g(i.$id)&&l(i.exclusiveMaximum)&&l(i.exclusiveMinimum)&&l(i.maximum)&&l(i.minimum)&&l(i.multipleOf)}s.TBigInt=S;function N(i){return A(i,"Boolean")&&i.type==="boolean"&&g(i.$id)}s.TBoolean=N;function B(i){return A(i,"Constructor")&&i.type==="Constructor"&&g(i.$id)&&U.IsArray(i.parameters)&&i.parameters.every(k=>V(k))&&V(i.returns)}s.TConstructor=B;function $(i){return A(i,"Date")&&i.type==="Date"&&g(i.$id)&&f(i.exclusiveMaximumTimestamp)&&f(i.exclusiveMinimumTimestamp)&&f(i.maximumTimestamp)&&f(i.minimumTimestamp)&&f(i.multipleOfTimestamp)}s.TDate=$;function C(i){return A(i,"Function")&&i.type==="Function"&&g(i.$id)&&U.IsArray(i.parameters)&&i.parameters.every(k=>V(k))&&V(i.returns)}s.TFunction=C;function _(i){return A(i,"Integer")&&i.type==="integer"&&g(i.$id)&&f(i.exclusiveMaximum)&&f(i.exclusiveMinimum)&&f(i.maximum)&&f(i.minimum)&&f(i.multipleOf)}s.TInteger=_;function W(i){return A(i,"Intersect")&&!(U.IsString(i.type)&&i.type!=="object")&&U.IsArray(i.allOf)&&i.allOf.every(k=>V(k)&&!Pe(k))&&g(i.type)&&(p(i.unevaluatedProperties)||O(i.unevaluatedProperties))&&g(i.$id)}s.TIntersect=W;function D(i){return A(i,"Iterator")&&i.type==="Iterator"&&g(i.$id)&&V(i.items)}s.TIterator=D;function A(i,k){return Z(i)&&i[a.Kind]===k}s.TKindOf=A;function Z(i){return U.IsObject(i)&&a.Kind in i&&U.IsString(i[a.Kind])}s.TKind=Z;function le(i){return te(i)&&U.IsString(i.const)}s.TLiteralString=le;function Ue(i){return te(i)&&U.IsNumber(i.const)}s.TLiteralNumber=Ue;function fe(i){return te(i)&&U.IsBoolean(i.const)}s.TLiteralBoolean=fe;function te(i){return A(i,"Literal")&&g(i.$id)&&(U.IsBoolean(i.const)||U.IsNumber(i.const)||U.IsString(i.const))}s.TLiteral=te;function oe(i){return A(i,"Never")&&U.IsObject(i.not)&&Object.getOwnPropertyNames(i.not).length===0}s.TNever=oe;function z(i){return A(i,"Not")&&V(i.not)}s.TNot=z;function ue(i){return A(i,"Null")&&i.type==="null"&&g(i.$id)}s.TNull=ue;function Se(i){return A(i,"Number")&&i.type==="number"&&g(i.$id)&&f(i.exclusiveMaximum)&&f(i.exclusiveMinimum)&&f(i.maximum)&&f(i.minimum)&&f(i.multipleOf)}s.TNumber=Se;function xe(i){return A(i,"Object")&&i.type==="object"&&g(i.$id)&&U.IsObject(i.properties)&&r(i.additionalProperties)&&f(i.minProperties)&&f(i.maxProperties)&&Object.entries(i.properties).every(([k,h])=>u(k)&&V(h))}s.TObject=xe;function ee(i){return A(i,"Promise")&&i.type==="Promise"&&g(i.$id)&&V(i.item)}s.TPromise=ee;function Ne(i){return A(i,"Record")&&i.type==="object"&&g(i.$id)&&r(i.additionalProperties)&&U.IsObject(i.patternProperties)&&(k=>{let h=Object.getOwnPropertyNames(k.patternProperties);return h.length===1&&e(h[0])&&U.IsObject(k.patternProperties)&&V(k.patternProperties[h[0]])})(i)}s.TRecord=Ne;function Ve(i){return U.IsObject(i)&&a.Hint in i&&i[a.Hint]==="Recursive"}s.TRecursive=Ve;function je(i){return A(i,"Ref")&&g(i.$id)&&U.IsString(i.$ref)}s.TRef=je;function ye(i){return A(i,"String")&&i.type==="string"&&g(i.$id)&&f(i.minLength)&&f(i.maxLength)&&x(i.pattern)&&j(i.format)}s.TString=ye;function ge(i){return A(i,"Symbol")&&i.type==="symbol"&&g(i.$id)}s.TSymbol=ge;function pe(i){return A(i,"TemplateLiteral")&&i.type==="string"&&U.IsString(i.pattern)&&i.pattern[0]==="^"&&i.pattern[i.pattern.length-1]==="$"}s.TTemplateLiteral=pe;function Ae(i){return A(i,"This")&&g(i.$id)&&U.IsString(i.$ref)}s.TThis=Ae;function Pe(i){return U.IsObject(i)&&a.Transform in i}s.TTransform=Pe;function J(i){return A(i,"Tuple")&&i.type==="array"&&g(i.$id)&&U.IsNumber(i.minItems)&&U.IsNumber(i.maxItems)&&i.minItems===i.maxItems&&(U.IsUndefined(i.items)&&U.IsUndefined(i.additionalItems)&&i.minItems===0||U.IsArray(i.items)&&i.items.every(k=>V(k)))}s.TTuple=J;function be(i){return A(i,"Undefined")&&i.type==="undefined"&&g(i.$id)}s.TUndefined=be;function se(i){return ie(i)&&i.anyOf.every(k=>le(k)||Ue(k))}s.TUnionLiteral=se;function ie(i){return A(i,"Union")&&g(i.$id)&&U.IsObject(i)&&U.IsArray(i.anyOf)&&i.anyOf.every(k=>V(k))}s.TUnion=ie;function me(i){return A(i,"Uint8Array")&&i.type==="Uint8Array"&&g(i.$id)&&f(i.minByteLength)&&f(i.maxByteLength)}s.TUint8Array=me;function H(i){return A(i,"Unknown")&&g(i.$id)}s.TUnknown=H;function de(i){return A(i,"Unsafe")}s.TUnsafe=de;function X(i){return A(i,"Void")&&i.type==="void"&&g(i.$id)}s.TVoid=X;function ae(i){return U.IsObject(i)&&i[a.Readonly]==="Readonly"}s.TReadonly=ae;function we(i){return U.IsObject(i)&&i[a.Optional]==="Optional"}s.TOptional=we;function V(i){return U.IsObject(i)&&(I(i)||R(i)||N(i)||S(i)||b(i)||B(i)||$(i)||C(i)||_(i)||W(i)||D(i)||te(i)||oe(i)||z(i)||ue(i)||Se(i)||xe(i)||ee(i)||Ne(i)||je(i)||ye(i)||ge(i)||pe(i)||Ae(i)||J(i)||be(i)||ie(i)||me(i)||H(i)||de(i)||X(i)||Z(i)&&vn.Has(i[a.Kind]))}s.TSchema=V})(c||(a.TypeGuard=c={}));var Nn;(function(s){function e(u){return u[a.Kind]==="Intersect"?u.allOf.every(r=>e(r)):u[a.Kind]==="Union"?u.anyOf.some(r=>e(r)):u[a.Kind]==="Undefined"?!0:u[a.Kind]==="Not"?!e(u.not):!1}s.Check=e})(Nn||(a.ExtendsUndefined=Nn={}));var en=class extends ce{};a.TypeExtendsError=en;var y;(function(s){s[s.Union=0]="Union",s[s.True=1]="True",s[s.False=2]="False"})(y||(a.TypeExtendsResult=y={}));var Le;(function(s){function e(t){return t===y.False?t:y.True}function u(t){throw new en(t)}function r(t){return c.TNever(t)||c.TIntersect(t)||c.TUnion(t)||c.TUnknown(t)||c.TAny(t)}function l(t,n){return c.TNever(n)?A(t,n):c.TIntersect(n)?C(t,n):c.TUnion(n)?We(t,n):c.TUnknown(n)?Fe(t,n):c.TAny(n)?f(t,n):u("StructuralRight")}function f(t,n){return y.True}function p(t,n){return c.TIntersect(n)?C(t,n):c.TUnion(n)&&n.anyOf.some(K=>c.TAny(K)||c.TUnknown(K))?y.True:c.TUnion(n)?y.Union:c.TUnknown(n)||c.TAny(n)?y.True:y.Union}function g(t,n){return c.TUnknown(t)?y.False:c.TAny(t)?y.Union:c.TNever(t)?y.True:y.False}function x(t,n){return c.TObject(n)&&pe(n)?y.True:r(n)?l(t,n):c.TArray(n)?e(M(t.items,n.items)):y.False}function j(t,n){return r(n)?l(t,n):c.TAsyncIterator(n)?e(M(t.items,n.items)):y.False}function O(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TBigInt(n)?y.True:y.False}function I(t,n){return c.TLiteral(t)&&U.IsBoolean(t.const)||c.TBoolean(t)?y.True:y.False}function R(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TBoolean(n)?y.True:y.False}function b(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TConstructor(n)?t.parameters.length>n.parameters.length?y.False:t.parameters.every((K,ne)=>e(M(n.parameters[ne],K))===y.True)?e(M(t.returns,n.returns)):y.False:y.False}function S(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TDate(n)?y.True:y.False}function N(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TFunction(n)?t.parameters.length>n.parameters.length?y.False:t.parameters.every((K,ne)=>e(M(n.parameters[ne],K))===y.True)?e(M(t.returns,n.returns)):y.False:y.False}function B(t,n){return c.TLiteral(t)&&U.IsNumber(t.const)||c.TNumber(t)||c.TInteger(t)?y.True:y.False}function $(t,n){return c.TInteger(n)||c.TNumber(n)?y.True:r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):y.False}function C(t,n){return n.allOf.every(K=>M(t,K)===y.True)?y.True:y.False}function _(t,n){return t.allOf.some(K=>M(K,n)===y.True)?y.True:y.False}function W(t,n){return r(n)?l(t,n):c.TIterator(n)?e(M(t.items,n.items)):y.False}function D(t,n){return c.TLiteral(n)&&n.const===t.const?y.True:r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TString(n)?X(t,n):c.TNumber(n)?te(t,n):c.TInteger(n)?B(t,n):c.TBoolean(n)?I(t,n):y.False}function A(t,n){return y.False}function Z(t,n){return y.True}function le(t){let[n,K]=[t,0];for(;c.TNot(n);)n=n.not,K+=1;return K%2===0?n:a.Type.Unknown()}function Ue(t,n){return c.TNot(t)?M(le(t),n):c.TNot(n)?M(t,le(n)):u("Invalid fallthrough for Not")}function fe(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TNull(n)?y.True:y.False}function te(t,n){return c.TLiteralNumber(t)||c.TNumber(t)||c.TInteger(t)?y.True:y.False}function oe(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TInteger(n)||c.TNumber(n)?y.True:y.False}function z(t,n){return Object.getOwnPropertyNames(t.properties).length===n}function ue(t){return pe(t)}function Se(t){return z(t,0)||z(t,1)&&"description"in t.properties&&c.TUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(c.TString(t.properties.description.anyOf[0])&&c.TUndefined(t.properties.description.anyOf[1])||c.TString(t.properties.description.anyOf[1])&&c.TUndefined(t.properties.description.anyOf[0]))}function xe(t){return z(t,0)}function ee(t){return z(t,0)}function Ne(t){return z(t,0)}function Ve(t){return z(t,0)}function je(t){return pe(t)}function ye(t){let n=a.Type.Number();return z(t,0)||z(t,1)&&"length"in t.properties&&e(M(t.properties.length,n))===y.True}function ge(t){return z(t,0)}function pe(t){let n=a.Type.Number();return z(t,0)||z(t,1)&&"length"in t.properties&&e(M(t.properties.length,n))===y.True}function Ae(t){let n=a.Type.Function([a.Type.Any()],a.Type.Any());return z(t,0)||z(t,1)&&"then"in t.properties&&e(M(t.properties.then,n))===y.True}function Pe(t,n){return M(t,n)===y.False||c.TOptional(t)&&!c.TOptional(n)?y.False:y.True}function J(t,n){return c.TUnknown(t)?y.False:c.TAny(t)?y.Union:c.TNever(t)||c.TLiteralString(t)&&ue(n)||c.TLiteralNumber(t)&&xe(n)||c.TLiteralBoolean(t)&&ee(n)||c.TSymbol(t)&&Se(n)||c.TBigInt(t)&&Ne(n)||c.TString(t)&&ue(n)||c.TSymbol(t)&&Se(n)||c.TNumber(t)&&xe(n)||c.TInteger(t)&&xe(n)||c.TBoolean(t)&&ee(n)||c.TUint8Array(t)&&je(n)||c.TDate(t)&&Ve(n)||c.TConstructor(t)&&ge(n)||c.TFunction(t)&&ye(n)?y.True:c.TRecord(t)&&c.TString(ie(t))?n[a.Hint]==="Record"?y.True:y.False:c.TRecord(t)&&c.TNumber(ie(t))?z(n,0)?y.True:y.False:y.False}function be(t,n){return r(n)?l(t,n):c.TRecord(n)?H(t,n):c.TObject(n)?(()=>{for(let K of Object.getOwnPropertyNames(n.properties)){if(!(K in t.properties)&&!c.TOptional(n.properties[K]))return y.False;if(c.TOptional(n.properties[K]))return y.True;if(Pe(t.properties[K],n.properties[K])===y.False)return y.False}return y.True})():y.False}function se(t,n){return r(n)?l(t,n):c.TObject(n)&&Ae(n)?y.True:c.TPromise(n)?e(M(t.item,n.item)):y.False}function ie(t){return a.PatternNumberExact in t.patternProperties?a.Type.Number():a.PatternStringExact in t.patternProperties?a.Type.String():u("Unknown record key pattern")}function me(t){return a.PatternNumberExact in t.patternProperties?t.patternProperties[a.PatternNumberExact]:a.PatternStringExact in t.patternProperties?t.patternProperties[a.PatternStringExact]:u("Unable to get record value schema")}function H(t,n){let[K,ne]=[ie(n),me(n)];return c.TLiteralString(t)&&c.TNumber(K)&&e(M(t,ne))===y.True?y.True:c.TUint8Array(t)&&c.TNumber(K)||c.TString(t)&&c.TNumber(K)||c.TArray(t)&&c.TNumber(K)?M(t,ne):c.TObject(t)?(()=>{for(let Ge of Object.getOwnPropertyNames(t.properties))if(Pe(ne,t.properties[Ge])===y.False)return y.False;return y.True})():y.False}function de(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?M(me(t),me(n)):y.False}function X(t,n){return c.TLiteral(t)&&U.IsString(t.const)||c.TString(t)?y.True:y.False}function ae(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TString(n)?y.True:y.False}function we(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TSymbol(n)?y.True:y.False}function V(t,n){return c.TTemplateLiteral(t)?M(ve.Resolve(t),n):c.TTemplateLiteral(n)?M(t,ve.Resolve(n)):u("Invalid fallthrough for TemplateLiteral")}function i(t,n){return c.TArray(n)&&t.items!==void 0&&t.items.every(K=>M(K,n.items)===y.True)}function k(t,n){return c.TNever(t)?y.True:c.TUnknown(t)?y.False:c.TAny(t)?y.Union:y.False}function h(t,n){return r(n)?l(t,n):c.TObject(n)&&pe(n)||c.TArray(n)&&i(t,n)?y.True:c.TTuple(n)?U.IsUndefined(t.items)&&!U.IsUndefined(n.items)||!U.IsUndefined(t.items)&&U.IsUndefined(n.items)?y.False:U.IsUndefined(t.items)&&!U.IsUndefined(n.items)||t.items.every((K,ne)=>M(K,n.items[ne])===y.True)?y.True:y.False:y.False}function Je(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TUint8Array(n)?y.True:y.False}function Ee(t,n){return r(n)?l(t,n):c.TObject(n)?J(t,n):c.TRecord(n)?H(t,n):c.TVoid(n)?gn(t,n):c.TUndefined(n)?y.True:y.False}function We(t,n){return n.anyOf.some(K=>M(t,K)===y.True)?y.True:y.False}function Tn(t,n){return t.anyOf.every(K=>M(K,n)===y.True)?y.True:y.False}function Fe(t,n){return y.True}function yn(t,n){return c.TNever(n)?A(t,n):c.TIntersect(n)?C(t,n):c.TUnion(n)?We(t,n):c.TAny(n)?f(t,n):c.TString(n)?X(t,n):c.TNumber(n)?te(t,n):c.TInteger(n)?B(t,n):c.TBoolean(n)?I(t,n):c.TArray(n)?g(t,n):c.TTuple(n)?k(t,n):c.TObject(n)?J(t,n):c.TUnknown(n)?y.True:y.False}function gn(t,n){return c.TUndefined(t)||c.TUndefined(t)?y.True:y.False}function bn(t,n){return c.TIntersect(n)?C(t,n):c.TUnion(n)?We(t,n):c.TUnknown(n)?Fe(t,n):c.TAny(n)?f(t,n):c.TObject(n)?J(t,n):c.TVoid(n)?y.True:y.False}function M(t,n){return c.TTemplateLiteral(t)||c.TTemplateLiteral(n)?V(t,n):c.TNot(t)||c.TNot(n)?Ue(t,n):c.TAny(t)?p(t,n):c.TArray(t)?x(t,n):c.TBigInt(t)?O(t,n):c.TBoolean(t)?R(t,n):c.TAsyncIterator(t)?j(t,n):c.TConstructor(t)?b(t,n):c.TDate(t)?S(t,n):c.TFunction(t)?N(t,n):c.TInteger(t)?$(t,n):c.TIntersect(t)?_(t,n):c.TIterator(t)?W(t,n):c.TLiteral(t)?D(t,n):c.TNever(t)?Z(t,n):c.TNull(t)?fe(t,n):c.TNumber(t)?oe(t,n):c.TObject(t)?be(t,n):c.TRecord(t)?de(t,n):c.TString(t)?ae(t,n):c.TSymbol(t)?we(t,n):c.TTuple(t)?h(t,n):c.TPromise(t)?se(t,n):c.TUint8Array(t)?Je(t,n):c.TUndefined(t)?Ee(t,n):c.TUnion(t)?Tn(t,n):c.TUnknown(t)?yn(t,n):c.TVoid(t)?bn(t,n):u(`Unknown left type operand '${t[a.Kind]}'`)}function mn(t,n){return M(t,n)}s.Extends=mn})(Le||(a.TypeExtends=Le={}));var L;(function(s){function e(x){return x.map(j=>f(j))}function u(x){return new Date(x.getTime())}function r(x){return new Uint8Array(x)}function l(x){let j=Object.getOwnPropertyNames(x).reduce((I,R)=>({...I,[R]:f(x[R])}),{}),O=Object.getOwnPropertySymbols(x).reduce((I,R)=>({...I,[R]:f(x[R])}),{});return{...j,...O}}function f(x){return U.IsArray(x)?e(x):U.IsDate(x)?u(x):U.IsUint8Array(x)?r(x):U.IsObject(x)?l(x):x}function p(x){return x.map(j=>g(j))}s.Rest=p;function g(x,j={}){return{...f(x),...j}}s.Type=g})(L||(a.TypeClone=L={}));var Pn;(function(s){function e(b){return b.map(S=>{let{[a.Optional]:N,...B}=L.Type(S);return B})}function u(b){return b.every(S=>c.TOptional(S))}function r(b){return b.some(S=>c.TOptional(S))}function l(b){return u(b.allOf)?a.Type.Optional(a.Type.Intersect(e(b.allOf))):b}function f(b){return r(b.anyOf)?a.Type.Optional(a.Type.Union(e(b.anyOf))):b}function p(b){return b[a.Kind]==="Intersect"?l(b):b[a.Kind]==="Union"?f(b):b}function g(b,S){let N=b.allOf.reduce((B,$)=>{let C=I($,S);return C[a.Kind]==="Never"?B:[...B,C]},[]);return p(a.Type.Intersect(N))}function x(b,S){let N=b.anyOf.map(B=>I(B,S));return p(a.Type.Union(N))}function j(b,S){let N=b.properties[S];return U.IsUndefined(N)?a.Type.Never():a.Type.Union([N])}function O(b,S){let N=b.items;if(U.IsUndefined(N))return a.Type.Never();let B=N[S];return U.IsUndefined(B)?a.Type.Never():B}function I(b,S){return b[a.Kind]==="Intersect"?g(b,S):b[a.Kind]==="Union"?x(b,S):b[a.Kind]==="Object"?j(b,S):b[a.Kind]==="Tuple"?O(b,S):a.Type.Never()}function R(b,S,N={}){let B=S.map($=>I(b,$.toString()));return p(a.Type.Union(B,N))}s.Resolve=R})(Pn||(a.IndexedAccessor=Pn={}));var Me;(function(s){function e(O){let[I,R]=[O.slice(0,1),O.slice(1)];return`${I.toLowerCase()}${R}`}function u(O){let[I,R]=[O.slice(0,1),O.slice(1)];return`${I.toUpperCase()}${R}`}function r(O){return O.toUpperCase()}function l(O){return O.toLowerCase()}function f(O,I){let R=De.ParseExact(O.pattern);if(!qe.Check(R))return{...O,pattern:p(O.pattern,I)};let N=[...ze.Generate(R)].map(C=>a.Type.Literal(C)),B=g(N,I),$=a.Type.Union(B);return a.Type.TemplateLiteral([$])}function p(O,I){return typeof O=="string"?I==="Uncapitalize"?e(O):I==="Capitalize"?u(O):I==="Uppercase"?r(O):I==="Lowercase"?l(O):O:O.toString()}function g(O,I){if(O.length===0)return[];let[R,...b]=O;return[j(R,I),...g(b,I)]}function x(O,I){return c.TTemplateLiteral(O)?f(O,I):c.TUnion(O)?a.Type.Union(g(O.anyOf,I)):c.TLiteral(O)?a.Type.Literal(p(O.const,I)):O}function j(O,I){return x(O,I)}s.Map=j})(Me||(a.Intrinsic=Me={}));var _e;(function(s){function e(p,g){return a.Type.Intersect(p.allOf.map(x=>l(x,g)),{...p})}function u(p,g){return a.Type.Union(p.anyOf.map(x=>l(x,g)),{...p})}function r(p,g){return g(p)}function l(p,g){return p[a.Kind]==="Intersect"?e(p,g):p[a.Kind]==="Union"?u(p,g):p[a.Kind]==="Object"?r(p,g):p}function f(p,g,x){return{...l(L.Type(p),g),...x}}s.Map=f})(_e||(a.ObjectMap=_e={}));var nn;(function(s){function e(j){return j[0]==="^"&&j[j.length-1]==="$"?j.slice(1,j.length-1):j}function u(j,O){return j.allOf.reduce((I,R)=>[...I,...p(R,O)],[])}function r(j,O){let I=j.anyOf.map(R=>p(R,O));return[...I.reduce((R,b)=>b.map(S=>I.every(N=>N.includes(S))?R.add(S):R)[0],new Set)]}function l(j,O){return Object.getOwnPropertyNames(j.properties)}function f(j,O){return O.includePatterns?Object.getOwnPropertyNames(j.patternProperties):[]}function p(j,O){return c.TIntersect(j)?u(j,O):c.TUnion(j)?r(j,O):c.TObject(j)?l(j,O):c.TRecord(j)?f(j,O):[]}function g(j,O){return[...new Set(p(j,O))]}s.ResolveKeys=g;function x(j){return`^(${g(j,{includePatterns:!0}).map(R=>`(${e(R)})`).join("|")})$`}s.ResolvePattern=x})(nn||(a.KeyResolver=nn={}));var tn=class extends ce{};a.KeyArrayResolverError=tn;var He;(function(s){function e(u){return Array.isArray(u)?u:c.TUnionLiteral(u)?u.anyOf.map(r=>r.const.toString()):c.TLiteral(u)?[u.const]:c.TTemplateLiteral(u)?(()=>{let r=De.ParseExact(u.pattern);if(!qe.Check(r))throw new tn("Cannot resolve keys from infinite template expression");return[...ze.Generate(r)]})():[]}s.Resolve=e})(He||(a.KeyArrayResolver=He={}));var wn;(function(s){function*e(r){for(let l of r.anyOf)l[a.Kind]==="Union"?yield*e(l):yield l}function u(r){return a.Type.Union([...e(r)],{...r})}s.Resolve=u})(wn||(a.UnionResolver=wn={}));var rn=class extends ce{};a.TemplateLiteralPatternError=rn;var on;(function(s){function e(f){throw new rn(f)}function u(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(f,p){return c.TTemplateLiteral(f)?f.pattern.slice(1,f.pattern.length-1):c.TUnion(f)?`(${f.anyOf.map(g=>r(g,p)).join("|")})`:c.TNumber(f)?`${p}${a.PatternNumber}`:c.TInteger(f)?`${p}${a.PatternNumber}`:c.TBigInt(f)?`${p}${a.PatternNumber}`:c.TString(f)?`${p}${a.PatternString}`:c.TLiteral(f)?`${p}${u(f.const.toString())}`:c.TBoolean(f)?`${p}${a.PatternBoolean}`:e(`Unexpected Kind '${f[a.Kind]}'`)}function l(f){return`^${f.map(p=>r(p,"")).join("")}$`}s.Create=l})(on||(a.TemplateLiteralPattern=on={}));var ve;(function(s){function e(u){let r=De.ParseExact(u.pattern);if(!qe.Check(r))return a.Type.String();let l=[...ze.Generate(r)].map(f=>a.Type.Literal(f));return a.Type.Union(l)}s.Resolve=e})(ve||(a.TemplateLiteralResolver=ve={}));var Qe=class extends ce{};a.TemplateLiteralParserError=Qe;var De;(function(s){function e(b,S,N){return b[S]===N&&b.charCodeAt(S-1)!==92}function u(b,S){return e(b,S,"(")}function r(b,S){return e(b,S,")")}function l(b,S){return e(b,S,"|")}function f(b){if(!(u(b,0)&&r(b,b.length-1)))return!1;let S=0;for(let N=0;N<b.length;N++)if(u(b,N)&&(S+=1),r(b,N)&&(S-=1),S===0&&N!==b.length-1)return!1;return!0}function p(b){return b.slice(1,b.length-1)}function g(b){let S=0;for(let N=0;N<b.length;N++)if(u(b,N)&&(S+=1),r(b,N)&&(S-=1),l(b,N)&&S===0)return!0;return!1}function x(b){for(let S=0;S<b.length;S++)if(u(b,S))return!0;return!1}function j(b){let[S,N]=[0,0],B=[];for(let C=0;C<b.length;C++)if(u(b,C)&&(S+=1),r(b,C)&&(S-=1),l(b,C)&&S===0){let _=b.slice(N,C);_.length>0&&B.push(I(_)),N=C+1}let $=b.slice(N);return $.length>0&&B.push(I($)),B.length===0?{type:"const",const:""}:B.length===1?B[0]:{type:"or",expr:B}}function O(b){function S($,C){if(!u($,C))throw new Qe("TemplateLiteralParser: Index must point to open parens");let _=0;for(let W=C;W<$.length;W++)if(u($,W)&&(_+=1),r($,W)&&(_-=1),_===0)return[C,W];throw new Qe("TemplateLiteralParser: Unclosed group parens in expression")}function N($,C){for(let _=C;_<$.length;_++)if(u($,_))return[C,_];return[C,$.length]}let B=[];for(let $=0;$<b.length;$++)if(u(b,$)){let[C,_]=S(b,$),W=b.slice(C,_+1);B.push(I(W)),$=_}else{let[C,_]=N(b,$),W=b.slice(C,_);W.length>0&&B.push(I(W)),$=_-1}return B.length===0?{type:"const",const:""}:B.length===1?B[0]:{type:"and",expr:B}}function I(b){return f(b)?I(p(b)):g(b)?j(b):x(b)?O(b):{type:"const",const:b}}s.Parse=I;function R(b){return I(b.slice(1,b.length-1))}s.ParseExact=R})(De||(a.TemplateLiteralParser=De={}));var un=class extends ce{};a.TemplateLiteralFiniteError=un;var qe;(function(s){function e(p){throw new un(p)}function u(p){return p.type==="or"&&p.expr.length===2&&p.expr[0].type==="const"&&p.expr[0].const==="0"&&p.expr[1].type==="const"&&p.expr[1].const==="[1-9][0-9]*"}function r(p){return p.type==="or"&&p.expr.length===2&&p.expr[0].type==="const"&&p.expr[0].const==="true"&&p.expr[1].type==="const"&&p.expr[1].const==="false"}function l(p){return p.type==="const"&&p.const===".*"}function f(p){return r(p)?!0:u(p)||l(p)?!1:p.type==="and"?p.expr.every(g=>f(g)):p.type==="or"?p.expr.every(g=>f(g)):p.type==="const"?!0:e("Unknown expression type")}s.Check=f})(qe||(a.TemplateLiteralFinite=qe={}));var sn=class extends ce{};a.TemplateLiteralGeneratorError=sn;var ze;(function(s){function*e(p){if(p.length===1)return yield*p[0];for(let g of p[0])for(let x of e(p.slice(1)))yield`${g}${x}`}function*u(p){return yield*e(p.expr.map(g=>[...f(g)]))}function*r(p){for(let g of p.expr)yield*f(g)}function*l(p){return yield p.const}function*f(p){return p.type==="and"?yield*u(p):p.type==="or"?yield*r(p):p.type==="const"?yield*l(p):(()=>{throw new sn("Unknown expression")})()}s.Generate=f})(ze||(a.TemplateLiteralGenerator=ze={}));var Un;(function(s){function*e(f){let p=f.trim().replace(/"|'/g,"");return p==="boolean"?yield a.Type.Boolean():p==="number"?yield a.Type.Number():p==="bigint"?yield a.Type.BigInt():p==="string"?yield a.Type.String():yield(()=>{let g=p.split("|").map(x=>a.Type.Literal(x.trim()));return g.length===0?a.Type.Never():g.length===1?g[0]:a.Type.Union(g)})()}function*u(f){if(f[1]!=="{"){let p=a.Type.Literal("$"),g=r(f.slice(1));return yield*[p,...g]}for(let p=2;p<f.length;p++)if(f[p]==="}"){let g=e(f.slice(2,p)),x=r(f.slice(p+1));return yield*[...g,...x]}yield a.Type.Literal(f)}function*r(f){for(let p=0;p<f.length;p++)if(f[p]==="$"){let g=a.Type.Literal(f.slice(0,p)),x=u(f.slice(p));return yield*[g,...x]}yield a.Type.Literal(f)}function l(f){return[...r(f)]}s.Parse=l})(Un||(a.TemplateLiteralDslParser=Un={}));var an=class{constructor(e){this.schema=e}Decode(e){return new cn(this.schema,e)}};a.TransformDecodeBuilder=an;var cn=class{constructor(e,u){this.schema=e,this.decode=u}Encode(e){let u=L.Type(this.schema);return c.TTransform(u)?(()=>{let f={Encode:p=>u[a.Transform].Encode(e(p)),Decode:p=>this.decode(u[a.Transform].Decode(p))};return{...u,[a.Transform]:f}})():(()=>{let r={Decode:this.decode,Encode:e};return{...u,[a.Transform]:r}})()}};a.TransformEncodeBuilder=cn;var tt=0,ln=class extends ce{};a.TypeBuilderError=ln;var fn=class{Create(e){return e}Throw(e){throw new ln(e)}Discard(e,u){return u.reduce((r,l)=>{let{[l]:f,...p}=r;return p},e)}Strict(e){return JSON.parse(JSON.stringify(e))}};a.TypeBuilder=fn;var Ze=class extends fn{ReadonlyOptional(e){return this.Readonly(this.Optional(e))}Readonly(e){return{...L.Type(e),[a.Readonly]:"Readonly"}}Optional(e){return{...L.Type(e),[a.Optional]:"Optional"}}Any(e={}){return this.Create({...e,[a.Kind]:"Any"})}Array(e,u={}){return this.Create({...u,[a.Kind]:"Array",type:"array",items:L.Type(e)})}Boolean(e={}){return this.Create({...e,[a.Kind]:"Boolean",type:"boolean"})}Capitalize(e,u={}){return{...Me.Map(L.Type(e),"Capitalize"),...u}}Composite(e,u){let r=a.Type.Intersect(e,{}),f=nn.ResolveKeys(r,{includePatterns:!1}).reduce((p,g)=>({...p,[g]:a.Type.Index(r,[g])}),{});return a.Type.Object(f,u)}Enum(e,u={}){if(U.IsUndefined(e))return this.Throw("Enum undefined or empty");let r=Object.getOwnPropertyNames(e).filter(p=>isNaN(p)).map(p=>e[p]),f=[...new Set(r)].map(p=>a.Type.Literal(p));return this.Union(f,{...u,[a.Hint]:"Enum"})}Extends(e,u,r,l,f={}){switch(Le.Extends(e,u)){case y.Union:return this.Union([L.Type(r,f),L.Type(l,f)]);case y.True:return L.Type(r,f);case y.False:return L.Type(l,f)}}Exclude(e,u,r={}){return c.TTemplateLiteral(e)?this.Exclude(ve.Resolve(e),u,r):c.TTemplateLiteral(u)?this.Exclude(e,ve.Resolve(u),r):c.TUnion(e)?(()=>{let l=e.anyOf.filter(f=>Le.Extends(f,u)===y.False);return l.length===1?L.Type(l[0],r):this.Union(l,r)})():Le.Extends(e,u)!==y.False?this.Never(r):L.Type(e,r)}Extract(e,u,r={}){return c.TTemplateLiteral(e)?this.Extract(ve.Resolve(e),u,r):c.TTemplateLiteral(u)?this.Extract(e,ve.Resolve(u),r):c.TUnion(e)?(()=>{let l=e.anyOf.filter(f=>Le.Extends(f,u)!==y.False);return l.length===1?L.Type(l[0],r):this.Union(l,r)})():Le.Extends(e,u)!==y.False?L.Type(e,r):this.Never(r)}Index(e,u,r={}){return c.TArray(e)&&c.TNumber(u)?L.Type(e.items,r):c.TTuple(e)&&c.TNumber(u)?(()=>{let f=(U.IsUndefined(e.items)?[]:e.items).map(p=>L.Type(p));return this.Union(f,r)})():(()=>{let l=He.Resolve(u),f=L.Type(e);return Pn.Resolve(f,l,r)})()}Integer(e={}){return this.Create({...e,[a.Kind]:"Integer",type:"integer"})}Intersect(e,u={}){if(e.length===0)return a.Type.Never();if(e.length===1)return L.Type(e[0],u);e.some(p=>c.TTransform(p))&&this.Throw("Cannot intersect transform types");let r=e.every(p=>c.TObject(p)),l=L.Rest(e),f=c.TSchema(u.unevaluatedProperties)?{unevaluatedProperties:L.Type(u.unevaluatedProperties)}:{};return u.unevaluatedProperties===!1||c.TSchema(u.unevaluatedProperties)||r?this.Create({...u,...f,[a.Kind]:"Intersect",type:"object",allOf:l}):this.Create({...u,...f,[a.Kind]:"Intersect",allOf:l})}KeyOf(e,u={}){return c.TRecord(e)?(()=>{let r=Object.getOwnPropertyNames(e.patternProperties)[0];return r===a.PatternNumberExact?this.Number(u):r===a.PatternStringExact?this.String(u):this.Throw("Unable to resolve key type from Record key pattern")})():c.TTuple(e)?(()=>{let l=(U.IsUndefined(e.items)?[]:e.items).map((f,p)=>a.Type.Literal(p.toString()));return this.Union(l,u)})():c.TArray(e)?this.Number(u):(()=>{let r=nn.ResolveKeys(e,{includePatterns:!1});if(r.length===0)return this.Never(u);let l=r.map(f=>this.Literal(f));return this.Union(l,u)})()}Literal(e,u={}){return this.Create({...u,[a.Kind]:"Literal",const:e,type:typeof e})}Lowercase(e,u={}){return{...Me.Map(L.Type(e),"Lowercase"),...u}}Never(e={}){return this.Create({...e,[a.Kind]:"Never",not:{}})}Not(e,u){return this.Create({...u,[a.Kind]:"Not",not:L.Type(e)})}Null(e={}){return this.Create({...e,[a.Kind]:"Null",type:"null"})}Number(e={}){return this.Create({...e,[a.Kind]:"Number",type:"number"})}Object(e,u={}){let r=Object.getOwnPropertyNames(e),l=r.filter(x=>c.TOptional(e[x])),f=r.filter(x=>!l.includes(x)),p=c.TSchema(u.additionalProperties)?{additionalProperties:L.Type(u.additionalProperties)}:{},g=r.reduce((x,j)=>({...x,[j]:L.Type(e[j])}),{});return f.length>0?this.Create({...u,...p,[a.Kind]:"Object",type:"object",properties:g,required:f}):this.Create({...u,...p,[a.Kind]:"Object",type:"object",properties:g})}Omit(e,u,r={}){let l=He.Resolve(u);return _e.Map(this.Discard(L.Type(e),["$id",a.Transform]),f=>{U.IsArray(f.required)&&(f.required=f.required.filter(p=>!l.includes(p)),f.required.length===0&&delete f.required);for(let p of Object.getOwnPropertyNames(f.properties))l.includes(p)&&delete f.properties[p];return this.Create(f)},r)}Partial(e,u={}){return _e.Map(this.Discard(L.Type(e),["$id",a.Transform]),r=>{let l=Object.getOwnPropertyNames(r.properties).reduce((f,p)=>({...f,[p]:this.Optional(r.properties[p])}),{});return this.Object(l,this.Discard(r,["required"]))},u)}Pick(e,u,r={}){let l=He.Resolve(u);return _e.Map(this.Discard(L.Type(e),["$id",a.Transform]),f=>{U.IsArray(f.required)&&(f.required=f.required.filter(p=>l.includes(p)),f.required.length===0&&delete f.required);for(let p of Object.getOwnPropertyNames(f.properties))l.includes(p)||delete f.properties[p];return this.Create(f)},r)}Record(e,u,r={}){return c.TTemplateLiteral(e)?(()=>{let l=De.ParseExact(e.pattern);return qe.Check(l)?this.Object([...ze.Generate(l)].reduce((f,p)=>({...f,[p]:L.Type(u)}),{}),r):this.Create({...r,[a.Kind]:"Record",type:"object",patternProperties:{[e.pattern]:L.Type(u)}})})():c.TUnion(e)?(()=>{let l=wn.Resolve(e);if(c.TUnionLiteral(l)){let f=l.anyOf.reduce((p,g)=>({...p,[g.const]:L.Type(u)}),{});return this.Object(f,{...r,[a.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():c.TLiteral(e)?U.IsString(e.const)||U.IsNumber(e.const)?this.Object({[e.const]:L.Type(u)},r):this.Throw("Record key of type literal is not of type string or number"):c.TInteger(e)||c.TNumber(e)?this.Create({...r,[a.Kind]:"Record",type:"object",patternProperties:{[a.PatternNumberExact]:L.Type(u)}}):c.TString(e)?(()=>{let l=U.IsUndefined(e.pattern)?a.PatternStringExact:e.pattern;return this.Create({...r,[a.Kind]:"Record",type:"object",patternProperties:{[l]:L.Type(u)}})})():this.Never()}Recursive(e,u={}){U.IsUndefined(u.$id)&&(u.$id=`T${tt++}`);let r=e({[a.Kind]:"This",$ref:`${u.$id}`});return r.$id=u.$id,this.Create({...u,[a.Hint]:"Recursive",...r})}Ref(e,u={}){return U.IsString(e)?this.Create({...u,[a.Kind]:"Ref",$ref:e}):(U.IsUndefined(e.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...u,[a.Kind]:"Ref",$ref:e.$id}))}Required(e,u={}){return _e.Map(this.Discard(L.Type(e),["$id",a.Transform]),r=>{let l=Object.getOwnPropertyNames(r.properties).reduce((f,p)=>({...f,[p]:this.Discard(r.properties[p],[a.Optional])}),{});return this.Object(l,r)},u)}Rest(e){return c.TTuple(e)&&!U.IsUndefined(e.items)?L.Rest(e.items):c.TIntersect(e)?L.Rest(e.allOf):c.TUnion(e)?L.Rest(e.anyOf):[]}String(e={}){return this.Create({...e,[a.Kind]:"String",type:"string"})}TemplateLiteral(e,u={}){let r=U.IsString(e)?on.Create(Un.Parse(e)):on.Create(e);return this.Create({...u,[a.Kind]:"TemplateLiteral",type:"string",pattern:r})}Transform(e){return new an(e)}Tuple(e,u={}){let[r,l,f]=[!1,e.length,e.length],p=L.Rest(e),g=e.length>0?{...u,[a.Kind]:"Tuple",type:"array",items:p,additionalItems:r,minItems:l,maxItems:f}:{...u,[a.Kind]:"Tuple",type:"array",minItems:l,maxItems:f};return this.Create(g)}Uncapitalize(e,u={}){return{...Me.Map(L.Type(e),"Uncapitalize"),...u}}Union(e,u={}){return c.TTemplateLiteral(e)?ve.Resolve(e):(()=>{let r=e;if(r.length===0)return this.Never(u);if(r.length===1)return this.Create(L.Type(r[0],u));let l=L.Rest(r);return this.Create({...u,[a.Kind]:"Union",anyOf:l})})()}Unknown(e={}){return this.Create({...e,[a.Kind]:"Unknown"})}Unsafe(e={}){return this.Create({...e,[a.Kind]:e[a.Kind]||"Unsafe"})}Uppercase(e,u={}){return{...Me.Map(L.Type(e),"Uppercase"),...u}}};a.JsonTypeBuilder=Ze;var pn=class extends Ze{AsyncIterator(e,u={}){return this.Create({...u,[a.Kind]:"AsyncIterator",type:"AsyncIterator",items:L.Type(e)})}Awaited(e,u={}){let r=l=>l.length>0?(()=>{let[f,...p]=l;return[this.Awaited(f),...r(p)]})():l;return c.TIntersect(e)?a.Type.Intersect(r(e.allOf)):c.TUnion(e)?a.Type.Union(r(e.anyOf)):c.TPromise(e)?this.Awaited(e.item):L.Type(e,u)}BigInt(e={}){return this.Create({...e,[a.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(e,u={}){return this.Tuple([...e.parameters],{...u})}Constructor(e,u,r){let[l,f]=[L.Rest(e),L.Type(u)];return this.Create({...r,[a.Kind]:"Constructor",type:"Constructor",parameters:l,returns:f})}Date(e={}){return this.Create({...e,[a.Kind]:"Date",type:"Date"})}Function(e,u,r){let[l,f]=[L.Rest(e),L.Type(u)];return this.Create({...r,[a.Kind]:"Function",type:"Function",parameters:l,returns:f})}InstanceType(e,u={}){return L.Type(e.returns,u)}Iterator(e,u={}){return this.Create({...u,[a.Kind]:"Iterator",type:"Iterator",items:L.Type(e)})}Parameters(e,u={}){return this.Tuple(e.parameters,{...u})}Promise(e,u={}){return this.Create({...u,[a.Kind]:"Promise",type:"Promise",item:L.Type(e)})}RegExp(e,u={}){let r=U.IsString(e)?e:e.source;return this.Create({...u,[a.Kind]:"String",type:"string",pattern:r})}RegEx(e,u={}){return this.RegExp(e,u)}ReturnType(e,u={}){return L.Type(e.returns,u)}Symbol(e){return this.Create({...e,[a.Kind]:"Symbol",type:"symbol"})}Undefined(e={}){return this.Create({...e,[a.Kind]:"Undefined",type:"undefined"})}Uint8Array(e={}){return this.Create({...e,[a.Kind]:"Uint8Array",type:"Uint8Array"})}Void(e={}){return this.Create({...e,[a.Kind]:"Void",type:"void"})}};a.JavaScriptTypeBuilder=pn;a.JsonType=new Ze;a.Type=new pn});var Cn=In((Xe,Sn)=>{(function(s,e){typeof Xe=="object"&&typeof Sn=="object"?Sn.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Xe=="object"?Xe.Parsimmon=e():s.Parsimmon=e()})(typeof self<"u"?self:Xe,function(){return function(s){var e={};function u(r){if(e[r])return e[r].exports;var l=e[r]={i:r,l:!1,exports:{}};return s[r].call(l.exports,l,l.exports,u),l.l=!0,l.exports}return u.m=s,u.c=e,u.d=function(r,l,f){u.o(r,l)||Object.defineProperty(r,l,{configurable:!1,enumerable:!0,get:f})},u.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},u.n=function(r){var l=r&&r.__esModule?function(){return r.default}:function(){return r};return u.d(l,"a",l),l},u.o=function(r,l){return Object.prototype.hasOwnProperty.call(r,l)},u.p="",u(u.s=0)}([function(s,e,u){"use strict";function r(o){if(!(this instanceof r))return new r(o);this._=o}var l=r.prototype;function f(o,d){for(var T=0;T<o;T++)d(T)}function p(o,d,T){return function(m,v){f(v.length,function(P){m(v[P],P,v)})}(function(m,v,P){d=o(d,m,v,P)},T),d}function g(o,d){return p(function(T,m,v,P){return T.concat([o(m,v,P)])},[],d)}function x(o,d){var T={v:0,buf:d};return f(o,function(){var m;T={v:T.v<<1|(m=T.buf,m[0]>>7),buf:function(v){var P=p(function(w,F,q,G){return w.concat(q===G.length-1?Buffer.from([F,0]).readUInt16BE(0):G.readUInt16BE(q))},[],v);return Buffer.from(g(function(w){return(w<<1&65535)>>8},P))}(T.buf)}}),T}function j(){return typeof Buffer<"u"}function O(){if(!j())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function I(o){O();var d=p(function(P,w){return P+w},0,o);if(d%8!=0)throw new Error("The bits ["+o.join(", ")+"] add up to "+d+" which is not an even number of bytes; the total should be divisible by 8");var T,m=d/8,v=(T=function(P){return P>48},p(function(P,w){return P||(T(w)?w:P)},null,o));if(v)throw new Error(v+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r(function(P,w){var F=m+w;return F>P.length?A(w,m.toString()+" bytes"):D(F,p(function(q,G){var Y=x(G,q.buf);return{coll:q.coll.concat(Y.v),buf:Y.buf}},{coll:[],buf:P.slice(w,F)},o).coll)})}function R(o,d){return new r(function(T,m){return O(),m+d>T.length?A(m,d+" bytes for "+o):D(m+d,T.slice(m,m+d))})}function b(o,d){if(typeof(T=d)!="number"||Math.floor(T)!==T||d<0||d>6)throw new Error(o+" requires integer length in range [0, 6].");var T}function S(o){return b("uintBE",o),R("uintBE("+o+")",o).map(function(d){return d.readUIntBE(0,o)})}function N(o){return b("uintLE",o),R("uintLE("+o+")",o).map(function(d){return d.readUIntLE(0,o)})}function B(o){return b("intBE",o),R("intBE("+o+")",o).map(function(d){return d.readIntBE(0,o)})}function $(o){return b("intLE",o),R("intLE("+o+")",o).map(function(d){return d.readIntLE(0,o)})}function C(o){return o instanceof r}function _(o){return{}.toString.call(o)==="[object Array]"}function W(o){return j()&&Buffer.isBuffer(o)}function D(o,d){return{status:!0,index:o,value:d,furthest:-1,expected:[]}}function A(o,d){return _(d)||(d=[d]),{status:!1,index:-1,value:null,furthest:o,expected:d}}function Z(o,d){if(!d||o.furthest>d.furthest)return o;var T=o.furthest===d.furthest?function(m,v){if(function(){if(r._supportsSet!==void 0)return r._supportsSet;var Oe=typeof Set<"u";return r._supportsSet=Oe,Oe}()&&Array.from){for(var P=new Set(m),w=0;w<v.length;w++)P.add(v[w]);var F=Array.from(P);return F.sort(),F}for(var q={},G=0;G<m.length;G++)q[m[G]]=!0;for(var Y=0;Y<v.length;Y++)q[v[Y]]=!0;var Ie=[];for(var re in q)({}).hasOwnProperty.call(q,re)&&Ie.push(re);return Ie.sort(),Ie}(o.expected,d.expected):d.expected;return{status:o.status,index:o.index,value:o.value,furthest:d.furthest,expected:T}}var le={};function Ue(o,d){if(W(o))return{offset:d,line:-1,column:-1};o in le||(le[o]={});for(var T=le[o],m=0,v=0,P=0,w=d;w>=0;){if(w in T){m=T[w].line,P===0&&(P=T[w].lineStart);break}(o.charAt(w)===`
`||o.charAt(w)==="\r"&&o.charAt(w+1)!==`
`)&&(v++,P===0&&(P=w+1)),w--}var F=m+v,q=d-P;return T[d]={line:F,lineStart:P},{offset:d,line:F+1,column:q+1}}function fe(o){if(!C(o))throw new Error("not a parser: "+o)}function te(o,d){return typeof o=="string"?o.charAt(d):o[d]}function oe(o){if(typeof o!="number")throw new Error("not a number: "+o)}function z(o){if(typeof o!="function")throw new Error("not a function: "+o)}function ue(o){if(typeof o!="string")throw new Error("not a string: "+o)}var Se=2,xe=3,ee=8,Ne=5*ee,Ve=4*ee,je="  ";function ye(o,d){return new Array(d+1).join(o)}function ge(o,d,T){var m=d-o.length;return m<=0?o:ye(T,m)+o}function pe(o,d,T,m){return{from:o-d>0?o-d:0,to:o+T>m?m:o+T}}function Ae(o,d){var T,m,v,P,w,F=d.index,q=F.offset,G=1;if(q===o.length)return"Got the end of the input";if(W(o)){var Y=q-q%ee,Ie=q-Y,re=pe(Y,Ne,Ve+ee,o.length),Oe=g(function(Q){return g(function(Ce){return ge(Ce.toString(16),2,"0")},Q)},function(Q,Ce){var $e=Q.length,Re=[],Ke=0;if($e<=Ce)return[Q.slice()];for(var ke=0;ke<$e;ke++)Re[Ke]||Re.push([]),Re[Ke].push(Q[ke]),(ke+1)%Ce==0&&Ke++;return Re}(o.slice(re.from,re.to).toJSON().data,ee));P=function(Q){return Q.from===0&&Q.to===1?{from:Q.from,to:Q.to}:{from:Q.from/ee,to:Math.floor(Q.to/ee)}}(re),m=Y/ee,T=3*Ie,Ie>=4&&(T+=1),G=2,v=g(function(Q){return Q.length<=4?Q.join(" "):Q.slice(0,4).join(" ")+"  "+Q.slice(4).join(" ")},Oe),(w=(8*(P.to>0?P.to-1:P.to)).toString(16).length)<2&&(w=2)}else{var Be=o.split(/\r\n|[\n\r\u2028\u2029]/);T=F.column-1,m=F.line-1,P=pe(m,Se,xe,Be.length),v=Be.slice(P.from,P.to),w=P.to.toString().length}var Zn=m-P.from;return W(o)&&(w=(8*(P.to>0?P.to-1:P.to)).toString(16).length)<2&&(w=2),p(function(Q,Ce,$e){var Re,Ke=$e===Zn,ke=Ke?"> ":je;return Re=W(o)?ge((8*(P.from+$e)).toString(16),w,"0"):ge((P.from+$e+1).toString(),w," "),[].concat(Q,[ke+Re+" | "+Ce],Ke?[je+ye(" ",w)+" | "+ge("",T," ")+ye("^",G)]:[])},[],v).join(`
`)}function Pe(o,d){return[`
`,"-- PARSING FAILED "+ye("-",50),`

`,Ae(o,d),`

`,(T=d.expected,T.length===1?`Expected:

`+T[0]:`Expected one of the following: 

`+T.join(", ")),`
`].join("");var T}function J(o){return o.flags!==void 0?o.flags:[o.global?"g":"",o.ignoreCase?"i":"",o.multiline?"m":"",o.unicode?"u":"",o.sticky?"y":""].join("")}function be(){for(var o=[].slice.call(arguments),d=o.length,T=0;T<d;T+=1)fe(o[T]);return r(function(m,v){for(var P,w=new Array(d),F=0;F<d;F+=1){if(!(P=Z(o[F]._(m,v),P)).status)return P;w[F]=P.value,v=P.index}return Z(D(v,w),P)})}function se(){var o=[].slice.call(arguments);if(o.length===0)throw new Error("seqMap needs at least one argument");var d=o.pop();return z(d),be.apply(null,o).map(function(T){return d.apply(null,T)})}function ie(){var o=[].slice.call(arguments),d=o.length;if(d===0)return we("zero alternates");for(var T=0;T<d;T+=1)fe(o[T]);return r(function(m,v){for(var P,w=0;w<o.length;w+=1)if((P=Z(o[w]._(m,v),P)).status)return P;return P})}function me(o,d){return H(o,d).or(ae([]))}function H(o,d){return fe(o),fe(d),se(o,d.then(o).many(),function(T,m){return[T].concat(m)})}function de(o){ue(o);var d="'"+o+"'";return r(function(T,m){var v=m+o.length,P=T.slice(m,v);return P===o?D(v,P):A(m,d)})}function X(o,d){(function(v){if(!(v instanceof RegExp))throw new Error("not a regexp: "+v);for(var P=J(v),w=0;w<P.length;w++){var F=P.charAt(w);if(F!=="i"&&F!=="m"&&F!=="u"&&F!=="s")throw new Error('unsupported regexp flag "'+F+'": '+v)}})(o),arguments.length>=2?oe(d):d=0;var T=function(v){return RegExp("^(?:"+v.source+")",J(v))}(o),m=""+o;return r(function(v,P){var w=T.exec(v.slice(P));if(w){if(0<=d&&d<=w.length){var F=w[0],q=w[d];return D(P+F.length,q)}return A(P,"valid match group (0 to "+w.length+") in "+m)}return A(P,m)})}function ae(o){return r(function(d,T){return D(T,o)})}function we(o){return r(function(d,T){return A(T,o)})}function V(o){if(C(o))return r(function(d,T){var m=o._(d,T);return m.index=T,m.value="",m});if(typeof o=="string")return V(de(o));if(o instanceof RegExp)return V(X(o));throw new Error("not a string, regexp, or parser: "+o)}function i(o){return fe(o),r(function(d,T){var m=o._(d,T),v=d.slice(T,m.index);return m.status?A(T,'not "'+v+'"'):D(T,null)})}function k(o){return z(o),r(function(d,T){var m=te(d,T);return T<d.length&&o(m)?D(T+1,m):A(T,"a character/byte matching "+o)})}function h(o,d){arguments.length<2&&(d=o,o=void 0);var T=r(function(m,v){return T._=d()._,T._(m,v)});return o?T.desc(o):T}function Je(){return we("fantasy-land/empty")}l.parse=function(o){if(typeof o!="string"&&!W(o))throw new Error(".parse must be called with a string or Buffer as its argument");var d,T=this.skip(Fe)._(o,0);return d=T.status?{status:!0,value:T.value}:{status:!1,index:Ue(o,T.furthest),expected:T.expected},delete le[o],d},l.tryParse=function(o){var d=this.parse(o);if(d.status)return d.value;var T=Pe(o,d),m=new Error(T);throw m.type="ParsimmonError",m.result=d,m},l.assert=function(o,d){return this.chain(function(T){return o(T)?ae(T):we(d)})},l.or=function(o){return ie(this,o)},l.trim=function(o){return this.wrap(o,o)},l.wrap=function(o,d){return se(o,this,d,function(T,m){return m})},l.thru=function(o){return o(this)},l.then=function(o){return fe(o),be(this,o).map(function(d){return d[1]})},l.many=function(){var o=this;return r(function(d,T){for(var m=[],v=void 0;;){if(!(v=Z(o._(d,T),v)).status)return Z(D(T,m),v);if(T===v.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");T=v.index,m.push(v.value)}})},l.tieWith=function(o){return ue(o),this.map(function(d){if(function(v){if(!_(v))throw new Error("not an array: "+v)}(d),d.length){ue(d[0]);for(var T=d[0],m=1;m<d.length;m++)ue(d[m]),T+=o+d[m];return T}return""})},l.tie=function(){return this.tieWith("")},l.times=function(o,d){var T=this;return arguments.length<2&&(d=o),oe(o),oe(d),r(function(m,v){for(var P=[],w=void 0,F=void 0,q=0;q<o;q+=1){if(F=Z(w=T._(m,v),F),!w.status)return F;v=w.index,P.push(w.value)}for(;q<d&&(F=Z(w=T._(m,v),F),w.status);q+=1)v=w.index,P.push(w.value);return Z(D(v,P),F)})},l.result=function(o){return this.map(function(){return o})},l.atMost=function(o){return this.times(0,o)},l.atLeast=function(o){return se(this.times(o),this.many(),function(d,T){return d.concat(T)})},l.map=function(o){z(o);var d=this;return r(function(T,m){var v=d._(T,m);return v.status?Z(D(v.index,o(v.value)),v):v})},l.contramap=function(o){z(o);var d=this;return r(function(T,m){var v=d.parse(o(T.slice(m)));return v.status?D(m+T.length,v.value):v})},l.promap=function(o,d){return z(o),z(d),this.contramap(o).map(d)},l.skip=function(o){return be(this,o).map(function(d){return d[0]})},l.mark=function(){return se(Ee,this,Ee,function(o,d,T){return{start:o,value:d,end:T}})},l.node=function(o){return se(Ee,this,Ee,function(d,T,m){return{name:o,value:T,start:d,end:m}})},l.sepBy=function(o){return me(this,o)},l.sepBy1=function(o){return H(this,o)},l.lookahead=function(o){return this.skip(V(o))},l.notFollowedBy=function(o){return this.skip(i(o))},l.desc=function(o){_(o)||(o=[o]);var d=this;return r(function(T,m){var v=d._(T,m);return v.status||(v.expected=o),v})},l.fallback=function(o){return this.or(ae(o))},l.ap=function(o){return se(o,this,function(d,T){return d(T)})},l.chain=function(o){var d=this;return r(function(T,m){var v=d._(T,m);return v.status?Z(o(v.value)._(T,v.index),v):v})},l.concat=l.or,l.empty=Je,l.of=ae,l["fantasy-land/ap"]=l.ap,l["fantasy-land/chain"]=l.chain,l["fantasy-land/concat"]=l.concat,l["fantasy-land/empty"]=l.empty,l["fantasy-land/of"]=l.of,l["fantasy-land/map"]=l.map;var Ee=r(function(o,d){return D(d,Ue(o,d))}),We=r(function(o,d){return d>=o.length?A(d,"any character/byte"):D(d+1,te(o,d))}),Tn=r(function(o,d){return D(o.length,o.slice(d))}),Fe=r(function(o,d){return d<o.length?A(d,"EOF"):D(d,null)}),yn=X(/[0-9]/).desc("a digit"),gn=X(/[0-9]*/).desc("optional digits"),bn=X(/[a-z]/i).desc("a letter"),M=X(/[a-z]*/i).desc("optional letters"),mn=X(/\s*/).desc("optional whitespace"),t=X(/\s+/).desc("whitespace"),n=de("\r"),K=de(`
`),ne=de(`\r
`),Ge=ie(ne,K,n).desc("newline"),Qn=ie(Ge,Fe);r.all=Tn,r.alt=ie,r.any=We,r.cr=n,r.createLanguage=function(o){var d={};for(var T in o)({}).hasOwnProperty.call(o,T)&&function(m){d[m]=h(function(){return o[m](d)})}(T);return d},r.crlf=ne,r.custom=function(o){return r(o(D,A))},r.digit=yn,r.digits=gn,r.empty=Je,r.end=Qn,r.eof=Fe,r.fail=we,r.formatError=Pe,r.index=Ee,r.isParser=C,r.lazy=h,r.letter=bn,r.letters=M,r.lf=K,r.lookahead=V,r.makeFailure=A,r.makeSuccess=D,r.newline=Ge,r.noneOf=function(o){return k(function(d){return o.indexOf(d)<0}).desc("none of '"+o+"'")},r.notFollowedBy=i,r.of=ae,r.oneOf=function(o){for(var d=o.split(""),T=0;T<d.length;T++)d[T]="'"+d[T]+"'";return k(function(m){return o.indexOf(m)>=0}).desc(d)},r.optWhitespace=mn,r.Parser=r,r.range=function(o,d){return k(function(T){return o<=T&&T<=d}).desc(o+"-"+d)},r.regex=X,r.regexp=X,r.sepBy=me,r.sepBy1=H,r.seq=be,r.seqMap=se,r.seqObj=function(){for(var o,d={},T=0,m=(o=arguments,Array.prototype.slice.call(o)),v=m.length,P=0;P<v;P+=1){var w=m[P];if(!C(w)){if(_(w)&&w.length===2&&typeof w[0]=="string"&&C(w[1])){var F=w[0];if(Object.prototype.hasOwnProperty.call(d,F))throw new Error("seqObj: duplicate key "+F);d[F]=!0,T++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(T===0)throw new Error("seqObj expects at least one named parser, found zero");return r(function(q,G){for(var Y,Ie={},re=0;re<v;re+=1){var Oe,Be;if(_(m[re])?(Oe=m[re][0],Be=m[re][1]):(Oe=null,Be=m[re]),!(Y=Z(Be._(q,G),Y)).status)return Y;Oe&&(Ie[Oe]=Y.value),G=Y.index}return Z(D(G,Ie),Y)})},r.string=de,r.succeed=ae,r.takeWhile=function(o){return z(o),r(function(d,T){for(var m=T;m<d.length&&o(te(d,m));)m++;return D(m,d.slice(T,m))})},r.test=k,r.whitespace=t,r["fantasy-land/empty"]=Je,r["fantasy-land/of"]=ae,r.Binary={bitSeq:I,bitSeqObj:function(o){O();var d={},T=0,m=g(function(P){if(_(P)){var w=P;if(w.length!==2)throw new Error("["+w.join(", ")+"] should be length 2, got length "+w.length);if(ue(w[0]),oe(w[1]),Object.prototype.hasOwnProperty.call(d,w[0]))throw new Error("duplicate key in bitSeqObj: "+w[0]);return d[w[0]]=!0,T++,w}return oe(P),[null,P]},o);if(T<1)throw new Error("bitSeqObj expects at least one named pair, got ["+o.join(", ")+"]");var v=g(function(P){return P[0]},m);return I(g(function(P){return P[1]},m)).map(function(P){return p(function(w,F){return F[0]!==null&&(w[F[0]]=F[1]),w},{},g(function(w,F){return[w,P[F]]},v))})},byte:function(o){if(O(),oe(o),o>255)throw new Error("Value specified to byte constructor ("+o+"=0x"+o.toString(16)+") is larger in value than a single byte.");var d=(o>15?"0x":"0x0")+o.toString(16);return r(function(T,m){var v=te(T,m);return v===o?D(m+1,v):A(m,d)})},buffer:function(o){return R("buffer",o).map(function(d){return Buffer.from(d)})},encodedString:function(o,d){return R("string",d).map(function(T){return T.toString(o)})},uintBE:S,uint8BE:S(1),uint16BE:S(2),uint32BE:S(4),uintLE:N,uint8LE:N(1),uint16LE:N(2),uint32LE:N(4),intBE:B,int8BE:B(1),int16BE:B(2),int32BE:B(4),intLE:$,int8LE:$(1),int16LE:$(2),int32LE:$(4),floatBE:R("floatBE",4).map(function(o){return o.readFloatBE(0)}),floatLE:R("floatLE",4).map(function(o){return o.readFloatLE(0)}),doubleBE:R("doubleBE",8).map(function(o){return o.readDoubleBE(0)}),doubleLE:R("doubleLE",8).map(function(o){return o.readDoubleLE(0)})},s.exports=r}])})});var qn=In((jt,Dn)=>{Dn.exports=he;he.flatten=he;he.unflatten=_n;function kn(s){return s&&s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function Mn(s){return s}function he(s,e){e=e||{};let u=e.delimiter||".",r=e.maxDepth,l=e.transformKey||Mn,f={};function p(g,x,j){j=j||1,Object.keys(g).forEach(function(O){let I=g[O],R=e.safe&&Array.isArray(I),b=Object.prototype.toString.call(I),S=kn(I),N=b==="[object Object]"||b==="[object Array]",B=x?x+u+l(O):l(O);if(!R&&!S&&N&&Object.keys(I).length&&(!e.maxDepth||j<r))return p(I,B,j+1);f[B]=I})}return p(s),f}function _n(s,e){e=e||{};let u=e.delimiter||".",r=e.overwrite||!1,l=e.transformKey||Mn,f={};if(kn(s)||Object.prototype.toString.call(s)!=="[object Object]")return s;function g(O){let I=Number(O);return isNaN(I)||O.indexOf(".")!==-1||e.object?O:I}function x(O,I,R){return Object.keys(R).reduce(function(b,S){return b[O+u+S]=R[S],b},I)}function j(O){let I=Object.prototype.toString.call(O),R=I==="[object Array]",b=I==="[object Object]";if(O){if(R)return!O.length;if(b)return!Object.keys(O).length}else return!0}return s=Object.keys(s).reduce(function(O,I){let R=Object.prototype.toString.call(s[I]);return!(R==="[object Object]"||R==="[object Array]")||j(s[I])?(O[I]=s[I],O):x(I,O,he(s[I],e))},{}),Object.keys(s).forEach(function(O){let I=O.split(u).map(l),R=g(I.shift()),b=g(I[0]),S=f;for(;b!==void 0;){if(R==="__proto__")return;let N=Object.prototype.toString.call(S[R]),B=N==="[object Object]"||N==="[object Array]";if(!r&&!B&&typeof S[R]<"u")return;(r&&!B||!r&&S[R]==null)&&(S[R]=typeof b=="number"&&!e.object?[]:{}),S=S[R],I.length>0&&(R=g(I.shift()),b=g(I[0]))}S[R]=_n(s[O],e)}),f}});var Te=On(An(),1),Fn=Te.Type.String({pattern:"^(\\./|\\../|/)[^*]*\\{languageTag\\}[^*]*\\.json",title:"Path to language files",description:"Specify the pathPattern to locate language files in your repository. It must include `{languageTag}` and end with `.json`.",examples:["./{languageTag}/file.json","../folder/{languageTag}/file.json","./{languageTag}.json"]}),Bn=Te.Type.Object({pathPattern:Fn,variableReferencePattern:Te.Type.Optional(Te.Type.Array(Te.Type.String(),{title:"Variable reference pattern",description:"The pattern to match content in the messages. You can define an opening and closing pattern. The closing pattern is not required. The default is '{{' and '}}'.",examples:["{ and }","{{ and }}","< and >","@:"]})),sourceLanguageFilePath:Te.Type.Optional(Fn),ignore:Te.Type.Optional(Te.Type.Array(Te.Type.String(),{title:"Ignore paths",description:"Set a path that should be ignored."}))});function Ye(s,e,u){return s.replace(new RegExp(rt(e),"g"),u)}function rt(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var E=On(Cn(),1),it=(s,e)=>E.default.createLanguage({entry:u=>E.default.alt(u.FunctionCall,E.default.any).many().map(r=>r.filter(l=>typeof l=="object")),stringLiteral:u=>E.default.alt(u.doubleQuotedString,u.singleQuotedString),doubleQuotedString:()=>E.default.string('"').then(E.default.regex(/[^"]*/)).skip(E.default.string('"')),singleQuotedString:()=>E.default.string("'").then(E.default.regex(/[^']*/)).skip(E.default.string("'")),whitespace:()=>E.default.optWhitespace,colon:u=>E.default.string(":").trim(u.whitespace),comma:u=>E.default.string(",").trim(u.whitespace),FunctionCall:function(u){return E.default.seqMap(E.default.regex(/[^a-zA-Z0-9]/),E.default.string("t"),E.default.string("("),E.default.index,u.stringLiteral,E.default.index,E.default.regex(/[^)]*/),E.default.string(")"),(r,l,f,p,g,x)=>{let j=Object.keys(e).map(Number).filter(O=>O<=p.offset).sort((O,I)=>I-O)[0];if(j){let O=e[j];O&&j&&(g=`${O}.${g}`)}return{messageId:g,position:{start:{line:p.line,character:p.column},end:{line:x.line,character:x.column}}}})}}),ot=()=>E.default.createLanguage({entry:s=>E.default.alt(s.FunctionCall,E.default.any).many().map(e=>e.filter(u=>typeof u=="object")),stringLiteral:s=>E.default.alt(s.doubleQuotedString,s.singleQuotedString),doubleQuotedString:()=>E.default.string('"').then(E.default.regex(/[^"]*/)).skip(E.default.string('"')),singleQuotedString:()=>E.default.string("'").then(E.default.regex(/[^']*/)).skip(E.default.string("'")),comma:s=>E.default.string(",").trim(s.whitespace),whitespace:()=>E.default.optWhitespace,colon:s=>E.default.string(":").trim(s.whitespace),stringParser:()=>E.default.alt(E.default.regexp(/'([^']*)'/,1).map(s=>({type:"string",value:s})),E.default.regexp(/"([^"]*)"/,1).map(s=>({type:"string",value:s}))),objectParser:()=>{let s={stringLiteral:E.default.regexp(/"([^"\\]|\\.)*"/).map(r=>JSON.parse(r)),variableName:E.default.regexp(/[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)*/),functionLiteral:E.default.regexp(/function\s*\([^)]*\)\s*\{[^}]*\}/)},e=E.default.alt(s.stringLiteral,s.variableName,s.functionLiteral),u=E.default.seq(E.default.regexp(/[\w]+/).skip(E.default.optWhitespace),E.default.string(":").then(E.default.optWhitespace).then(e).fallback(void 0)).map(([r,l])=>l!==null?[r,l]:[r,void 0]);return E.default.optWhitespace.then(E.default.seq(E.default.string("{").then(E.default.optWhitespace),E.default.sepBy(u,E.default.string(",").then(E.default.optWhitespace)),E.default.optWhitespace.then(E.default.string("}"))).map(([,r])=>({type:"object",value:Object.fromEntries(r)})))},FunctionCall:function(s){return E.default.seqMap(E.default.regex(/[^a-zA-Z0-9]/),E.default.regex(/\b(?:use|get)Translations\b/),E.default.string("("),E.default.index,E.default.alt(s.stringParser,s.objectParser),E.default.index,E.default.regex(/[^)]*/),E.default.string(")"),(e,u,r,l,f,p)=>{let g;return f.type==="string"?g=f.value:f&&f.value.namespace&&(g=f.value.namespace),{ns:g,start:l.offset,end:p.offset}})}});function ut(s){let u=ot().entry.tryParse(s),r={};for(let l of u)l.ns&&(r[l.start]=l.ns);return r}function $n(s,e){try{let u=ut(s);return it(e,u).entry.tryParse(s)}catch(u){return console.error("Parsing error:",u),[]}}var Kn=s=>({"app.inlang.ideExtension":{messageReferenceMatchers:[async e=>$n(e.documentText,s)],extractMessageOptions:[{callback:e=>({bundleId:e.bundleId,messageReplacement:`{t("${e.bundleId}")}`})},{callback:e=>({bundleId:e.bundleId,messageReplacement:`t("${e.bundleId}")`})},{callback:e=>({bundleId:e.bundleId,messageReplacement:e.bundleId})}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"}]}});var dn=On(qn(),1);var st=s=>{let e=zn(s,0);if(e===void 0||!ct(s[e]))return;let u=zn(s,e+1);if(u!==void 0)return lt(s,e,u)},Vn=st,zn=(s,e)=>{for(let u=e;u<s.length;u+=1){let r=s[u];if(!at(r))return u}},at=s=>s===" "||s==="	"||s===`
`||s==="\r",ct=s=>s==="{"||s==="[",lt=(s,e,u)=>{let r;for(let l=u-1;l>e;l-=1){let f=s[l];if(f==="\r")return;if(f===`
`)return ft(r);if(r===void 0)r=f;else if(r[0]===f)r+=f;else return}},ft=s=>s===void 0?0:s[0]===" "?s.length:s;var jn=s=>{let e=s.endsWith(`
`),u=Vn(s);return(r,l)=>JSON.stringify(r,l,u)+(e?`
`:"")};var Wn,En=!1,pt="plugin.inlang.nextIntl",Hn={id:pt,displayName:"Next-intl",description:"A plugin for the Next.js internationalization library next-intl",settingsSchema:Bn,loadMessages:async({settings:s,nodeishFs:e})=>(s["plugin.inlang.nextIntl"].variableReferencePattern=s["plugin.inlang.nextIntl"].variableReferencePattern||["{","}"],dt({settings:s,pluginSettings:s["plugin.inlang.nextIntl"],nodeishFs:e})),saveMessages:async({messages:s,settings:e,nodeishFs:u})=>(e["plugin.inlang.nextIntl"].variableReferencePattern=e["plugin.inlang.nextIntl"].variableReferencePattern||["{","}"],bt({pluginSettings:e["plugin.inlang.nextIntl"],nodeishFs:u,messages:s})),addCustomApi:({settings:s})=>Kn(s["plugin.inlang.nextIntl"])};async function dt(s){let e=[];for(let u of yt(s.settings.languageTags,s.settings.sourceLanguageTag)){let r=await Tt(s.pluginSettings.pathPattern,u,s.settings.sourceLanguageTag,s.nodeishFs,typeof s.pluginSettings.sourceLanguageFilePath=="string"&&u===s.settings.sourceLanguageTag?s.pluginSettings.sourceLanguageFilePath:void 0);for(let[l,f]of Object.entries(r))Object.keys(f).length!==0&&gt(e,Ye(l,"u002E","."),u,f,s.pluginSettings)}return e}async function Tt(s,e,u,r,l){typeof l>"u"&&(l=s.replace("{languageTag}",e));try{let f=await r.readFile(l,{encoding:"utf-8"});u===e&&(Wn=jn(f));let p=JSON.parse(f);return Object.values(p).some(x=>typeof x=="object")&&(En=!0),En?(0,dn.flatten)(p,{transformKey:function(x){return Ye(x,".","u002E")}}):p}catch(f){if(f.code==="FileNotFound"||f.code==="ENOENT")return{};throw f}}var yt=(s,e)=>{let u=s.filter(r=>r!==e);return u.unshift(e),u},gt=(s,e,u,r,l)=>{let f=s.findIndex(p=>p.id===e);if(f!==-1){let p={languageTag:u,match:[],pattern:Jn(r,l.variableReferencePattern)};s[f]?.variants.push(p)}else{let p={id:e,alias:{},selectors:[],variants:[]};p.variants=[{languageTag:u,match:[],pattern:Jn(r,l.variableReferencePattern)}],s.push(p)}};function Jn(s,e){let u=e[1]?new RegExp(`(\\${e[0]}[^\\${e[1]}]+\\${e[1]})`,"g"):new RegExp(`(${e}\\w+)`,"g");return s.split(u).filter(l=>l!=="").map(l=>u.test(l)&&e[0]?{type:"VariableReference",name:e[1]?l.slice(e[0].length,-e[1].length):l.slice(e[0].length)}:{type:"Text",value:l})}async function bt(s){let e={};for(let u of s.messages)for(let r of u.variants)e[r.languageTag]??={},e[r.languageTag][u.id]=r.pattern;for(let[u,r]of Object.entries(e)){let l=typeof s.pluginSettings.sourceLanguageFilePath=="string"&&u===Object.keys(e)[0]?s.pluginSettings.sourceLanguageFilePath:s.pluginSettings.pathPattern.replace("{languageTag}",u);try{await s.nodeishFs.readdir(l.split("/").slice(0,-1).join("/"))}catch{await s.nodeishFs.mkdir(l.split("/").slice(0,-1).join("/"),{recursive:!0})}await s.nodeishFs.writeFile(l,mt(r,s.pluginSettings.variableReferencePattern))}}function mt(s,e){let u={};for(let[r,l]of Object.entries(s)){let f=Ye(r,"..","u002E.");f.slice(-1)==="."&&(f=f.replace(/.$/,"u002E")),u[f]=It(l,e)}return En&&(u=(0,dn.unflatten)(u,{object:!0})),Ye(Wn(u),"u002E",".")}function It(s,e){let u=[];for(let r of s)switch(r.type){case"Text":u.push(r.value);break;case"VariableReference":u.push(e[1]?`${e[0]}${r.name}${e[1]}`:`${e[0]}${r.name}`);break;default:throw new Error(`Unknown message pattern element of type: ${r?.type}`)}return u.join("")}var Mt=Hn;export{Mt as default};
